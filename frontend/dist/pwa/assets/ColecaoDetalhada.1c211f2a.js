import{v as N,x as C,y,Q as D,a as be,z as a,A as de,B as e,F as n,G as h,X as Q,_ as P,H as R,I as W,r as i,W as I,N as L,O as j,w as T,M as J,Z as ie,aM as Ee,aN as Z,Y as re,o as ce,aB as we,aO as ye}from"./index.ea3a4f47.js";import{Q as K,C as U}from"./ColecaoService.24dd2f83.js";import{a as S,Q as F}from"./QCardSection.b0c042f9.js";import{a as A,Q as ke}from"./QPage.b2ce7923.js";import{Q as q,m as B,k as M,l as Y}from"./QDialog.3e63e9d5.js";import{Q as H}from"./QCardActions.b5eda4fc.js";import{_ as he}from"./BotaoVoltar.47981b60.js";import{Q as ee}from"./QList.2f3f9fe9.js";import"./utils.a2b22fbd.js";import"./axios.049aeb38.js";import"./scroll.3ca94129.js";const $e=N({__name:"BotaoFechar",emits:["close"],setup(v,{emit:w}){const m=w,l=()=>{m("close")};return(t,o)=>(C(),y(D,{flat:"",round:"",icon:"close",class:"btn-close",onClick:l}))}});const ve=v=>(R("data-v-ba0c35e4"),v=v(),W(),v),Oe={class:"text-h6"},Ie={class:"text-subtitle2"},De=ve(()=>n("strong",null,"Grau:",-1)),Me=ve(()=>n("strong",null,"Extens\xE3o:",-1)),qe=N({__name:"ModalViaDetalhada",props:{isOpen:{type:Boolean},via:{}},emits:["update:isOpen"],setup(v,{emit:w}){const m=v,l=w,t=de(),o=()=>{l("update:isOpen",!1)},r=()=>{o(),t.push(`/vias/${m.via.id}`)},s=be(()=>{const{grau:u,crux:x,artificial:b,duracao:$,exposicao:k}=m.via;return[u,x,b,$,k].filter(Boolean).join(", ")});return(u,x)=>(C(),y(q,{"model-value":u.isOpen,onHide:o},{default:a(()=>[e(A,{class:"modal-card"},{default:a(()=>[e($e,{onClose:o}),e(S,null,{default:a(()=>[n("div",Oe,h(u.via.nome),1),n("div",Ie,h(u.via.montanha.nome),1)]),_:1}),e(S,null,{default:a(()=>[n("p",null,[De,Q(" "+h(s.value),1)]),n("p",null,[Me,Q(" "+h(u.via.extensao)+"m",1)])]),_:1}),e(H,{align:"right"},{default:a(()=>[e(D,{flat:"",label:"Ver Detalhes",onClick:r})]),_:1})]),_:1})]),_:1},8,["model-value"]))}});var Ue=P(qe,[["__scopeId","data-v-ba0c35e4"]]);const X=v=>(R("data-v-3787b4b8"),v=v(),W(),v),Qe={class:"sort-options"},Se={class:"q-gutter-sm q-row items-center justify-between"},Ae=X(()=>n("span",{class:"sort-label"},"Grau",-1)),Be={class:"q-gutter-sm q-row items-center justify-between"},Ne=X(()=>n("span",{class:"sort-label"},"Dura\xE7\xE3o",-1)),je={class:"q-gutter-sm q-row items-center justify-between"},ze=X(()=>n("span",{class:"sort-label"},"Extens\xE3o",-1)),He={class:"q-gutter-sm q-row items-center justify-between"},Pe=X(()=>n("span",{class:"sort-label"},"Data",-1)),Te={class:"buttons q-mt-md q-row items-center justify-between"},Fe=N({__name:"ViasOrdenacao",emits:["sort","reset","close"],setup(v,{emit:w}){const m=i(!0),l=i(!1),t=i(!1),o=i(!1),r=i(!1),s=i("desc"),u=i("desc"),x=i("desc"),b=i("asc"),$=p=>{p==="grau"?(l.value=!l.value,t.value=!1,o.value=!1,r.value=!1):p==="duracao"?(t.value=!t.value,l.value=!1,o.value=!1,r.value=!1):p==="extensao"?(o.value=!o.value,l.value=!1,t.value=!1,r.value=!1):p==="data"&&(r.value=!r.value,l.value=!1,t.value=!1,o.value=!1),!l.value&&!t.value&&!o.value&&!r.value?V("reset"):g()},k=p=>{p==="grau"&&l.value?s.value=s.value==="desc"?"asc":"desc":p==="duracao"&&t.value?u.value=u.value==="desc"?"asc":"desc":p==="extensao"&&o.value?x.value=x.value==="desc"?"asc":"desc":p==="data"&&r.value&&(b.value=b.value==="desc"?"asc":"desc"),g()},g=()=>{let p=null;l.value?p={key:"grau",order:s.value}:t.value?p={key:"duracao",order:u.value}:o.value?p={key:"extensao",order:x.value}:r.value&&(p={key:"data",order:b.value}),p&&V("sort",p)},E=()=>{l.value=!1,t.value=!1,o.value=!1,r.value=!1,s.value="desc",u.value="desc",x.value="desc",b.value="asc",V("reset")},V=w;return(p,f)=>(C(),y(q,{modelValue:m.value,"onUpdate:modelValue":f[8]||(f[8]=O=>m.value=O)},{default:a(()=>[e(A,{class:"modal-card q-pa-md"},{default:a(()=>[e(S,{class:"q-pa-none"},{default:a(()=>[n("div",Qe,[e(ee,{class:"q-pa-none"},{default:a(()=>[e(B,{class:"q-pa-none"},{default:a(()=>[e(M,null,{default:a(()=>[n("div",Se,[Ae,e(I,{class:L(["sort-icon",{active:l.value}]),name:"filter_hdr",onClick:f[0]||(f[0]=O=>$("grau"))},null,8,["class"]),l.value?(C(),y(I,{key:0,class:"sort-icon",color:"negative",name:l.value?s.value==="desc"?"arrow_downward":"arrow_upward":"swap_vert",onClick:f[1]||(f[1]=O=>k("grau"))},null,8,["name"])):j("",!0)])]),_:1})]),_:1}),e(B,{class:"q-pa-none"},{default:a(()=>[e(M,null,{default:a(()=>[n("div",Be,[Ne,e(I,{class:L(["sort-icon",{active:t.value}]),name:"schedule",onClick:f[2]||(f[2]=O=>$("duracao"))},null,8,["class"]),t.value?(C(),y(I,{key:0,class:"sort-icon",color:"negative",name:t.value?u.value==="desc"?"arrow_downward":"arrow_upward":"swap_vert",onClick:f[3]||(f[3]=O=>k("duracao"))},null,8,["name"])):j("",!0)])]),_:1})]),_:1}),e(B,{class:"q-pa-none"},{default:a(()=>[e(M,null,{default:a(()=>[n("div",je,[ze,e(I,{class:L(["sort-icon",{active:o.value}]),name:"straighten",onClick:f[4]||(f[4]=O=>$("extensao"))},null,8,["class"]),o.value?(C(),y(I,{key:0,class:"sort-icon",color:"negative",name:o.value?x.value==="desc"?"arrow_downward":"arrow_upward":"swap_vert",onClick:f[5]||(f[5]=O=>k("extensao"))},null,8,["name"])):j("",!0)])]),_:1})]),_:1}),e(B,{class:"q-pa-none"},{default:a(()=>[e(M,null,{default:a(()=>[n("div",He,[Pe,e(I,{class:L(["sort-icon",{active:r.value}]),name:"event",onClick:f[6]||(f[6]=O=>$("data"))},null,8,["class"]),r.value?(C(),y(I,{key:0,class:"sort-icon",color:"negative",name:r.value?b.value==="desc"?"arrow_downward":"arrow_upward":"swap_vert",onClick:f[7]||(f[7]=O=>k("data"))},null,8,["name"])):j("",!0)])]),_:1})]),_:1})]),_:1}),n("div",Te,[e(D,{flat:"",icon:"refresh",label:"Redefinir",onClick:E,class:"q-mr-md"})])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var Ge=P(Fe,[["__scopeId","data-v-3787b4b8"]]);const Le=N({__name:"ImagemModal",props:{isOpen:{type:Boolean},imageUrl:{}},emits:["update:isOpen"],setup(v,{emit:w}){const m=v,l=w,t=i(m.isOpen);T(()=>m.isOpen,s=>{t.value=s}),T(t,s=>{s||l("update:isOpen",!1)});const o=()=>{t.value=!1},r=()=>{t.value=!1,l("update:isOpen",!1)};return(s,u)=>(C(),y(q,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=x=>t.value=x),onHide:r},{default:a(()=>[e(K,{src:s.imageUrl,class:"expanded-image",onClick:o},null,8,["src"])]),_:1},8,["modelValue"]))}});var Re=P(Le,[["__scopeId","data-v-78e48f8c"]]);const We={key:0},Xe=N({__name:"ModalConfigColecoes",props:{modelValue:Boolean,collectionData:{type:Object,required:!0}},emits:["update:modelValue","edit","delete"],setup(v,{emit:w}){const m=v,l=w,t=i(!1),o=i(!1),r=i("main"),s=i(m.collectionData.nome),u=i(m.collectionData.descricao);T(()=>m.collectionData,k=>{s.value=k.nome,u.value=k.descricao},{immediate:!0});const x=()=>{l("edit",{nome:s.value,descricao:u.value}),$()},b=()=>{l("delete"),$()},$=()=>{t.value=!1,o.value=!1,l("update:modelValue",!1)};return(k,g)=>(C(),y(q,{"model-value":v.modelValue,"onUpdate:modelValue":$},{default:a(()=>[e(A,null,{default:a(()=>[r.value==="main"?(C(),J("div",We,[e(ee,null,{default:a(()=>[e(B,{clickable:"",onClick:g[0]||(g[0]=E=>t.value=!0)},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(I,{name:"edit"})]),_:1}),e(M,null,{default:a(()=>[Q("Editar Cole\xE7\xE3o")]),_:1})]),_:1}),e(B,{clickable:"",onClick:g[1]||(g[1]=E=>o.value=!0)},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(I,{name:"delete",color:"red"})]),_:1}),e(M,null,{default:a(()=>[Q("Excluir Cole\xE7\xE3o")]),_:1})]),_:1})]),_:1})])):j("",!0),e(q,{modelValue:t.value,"onUpdate:modelValue":g[4]||(g[4]=E=>t.value=E)},{default:a(()=>[e(A,{style:{"min-width":"300px"}},{default:a(()=>[e(S,null,{default:a(()=>[e(F,{modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=E=>s.value=E),label:"Nome da Cole\xE7\xE3o"},null,8,["modelValue"]),e(F,{modelValue:u.value,"onUpdate:modelValue":g[3]||(g[3]=E=>u.value=E),label:"Descri\xE7\xE3o da Cole\xE7\xE3o"},null,8,["modelValue"])]),_:1}),e(H,{align:"right"},{default:a(()=>[e(D,{flat:"",label:"Salvar",color:"primary",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:o.value,"onUpdate:modelValue":g[5]||(g[5]=E=>o.value=E)},{default:a(()=>[e(A,null,{default:a(()=>[e(S,null,{default:a(()=>[Q(" Tem certeza que deseja excluir esta cole\xE7\xE3o? ")]),_:1}),e(H,{align:"right"},{default:a(()=>[e(D,{flat:"",label:"Sim",color:"red",onClick:b})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"]))}});const Ye=N({__name:"ViaSugestao",props:{vias:{}},emits:["add-via"],setup(v,{emit:w}){const m=v,l=w,t=o=>{o.added||(o.added=!0,l("add-via",o))};return(o,r)=>(C(),y(ee,{bordered:"",separator:""},{default:a(()=>[(C(!0),J(re,null,ie(m.vias,s=>(C(),y(B,{key:s.id,clickable:"",onClick:u=>t(s)},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(Ee,{square:"",size:"50px",class:"custom-avatar"},{default:a(()=>{var u;return[e(K,{src:((u=s.imagem)==null?void 0:u.url)||"https://via.placeholder.com/50",cover:""},null,8,["src"])]}),_:2},1024)]),_:2},1024),e(M,null,{default:a(()=>[e(Y,null,{default:a(()=>[Q(h(s.nome),1)]),_:2},1024),e(Y,{caption:""},{default:a(()=>[Q(h(s.montanha.nome),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:a(()=>[e(D,{flat:"",round:"",icon:s.added?"check":"add",color:s.added?"green":"primary",onClick:Z(u=>t(s),["stop"]),disabled:s.added},null,8,["icon","color","onClick","disabled"])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),m.vias.length?j("",!0):(C(),y(B,{key:0},{default:a(()=>[e(M,null,{default:a(()=>[e(Y,null,{default:a(()=>[Q("Nenhuma via encontrada.")]),_:1})]),_:1})]),_:1}))]),_:1}))}});var Ze=P(Ye,[["__scopeId","data-v-65cddbd4"]]);const Je=v=>(R("data-v-9efcc7e4"),v=v(),W(),v),Ke=Je(()=>n("div",{class:"text-h6"},"Adicionar Via",-1)),ea=N({__name:"AddViaModal",props:{isOpen:{type:Boolean},colecaoId:{}},emits:["update:isOpen","via-added"],setup(v,{emit:w}){const m=v,l=w,t=i(""),o=i([]),r=i(m.isOpen),s=i(1),u=i(1),x=()=>{s.value=1,o.value=[]},b=async()=>{const V=await U.getViasNotIn(m.colecaoId,s.value,10);o.value=s.value===1?V.vias:[...o.value,...V.vias],u.value=Math.ceil(V.total/10)},$=async()=>{if(x(),t.value.trim()){const V=await U.getViasNotIn(m.colecaoId,1,10);o.value=V.vias.filter(p=>p.nome.toLowerCase().includes(t.value.trim().toLowerCase()))}else await b()},k=async()=>{s.value<u.value&&(s.value+=1,await b())},g=V=>{l("via-added",V),V.added=!0},E=()=>{r.value=!1,l("update:isOpen",!1)};return T(()=>m.isOpen,V=>{r.value=V,V&&(x(),b())}),T(r,V=>{V||l("update:isOpen",!1)}),ce(()=>{m.isOpen&&(x(),b())}),(V,p)=>(C(),y(q,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=f=>r.value=f),onHide:E},{default:a(()=>[e(A,{class:"q-dialog-plugin"},{default:a(()=>[e(S,null,{default:a(()=>[Ke,e(F,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=f=>t.value=f),label:"Buscar vias",onInput:$,debounce:"300"},null,8,["modelValue"]),e(Ze,{vias:o.value,onAddVia:g},null,8,["vias"])]),_:1}),e(H,{align:"center"},{default:a(()=>[s.value<u.value?(C(),y(D,{key:0,onClick:k,label:"Carregar mais"})):j("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var aa=P(ea,[["__scopeId","data-v-9efcc7e4"]]);const la=v=>(R("data-v-540b2d24"),v=v(),W(),v),oa={class:"header-content"},ta={class:"header-info"},sa={class:"text-h5"},na={class:"text-subtitle1"},ua={class:"text-caption"},da={class:"icons-container"},ia=la(()=>n("br",null,null,-1)),ra={class:"via-list"},ca={class:"via-info"},va={class:"text-h6"},ma={class:"text-subtitle2"},pa={class:"text-subtitle2"},_a={class:"text-subtitle2"},fa={class:"text-subtitle2"},ga={class:"text-subtitle2"},xa=N({name:"ColecaoDetalhadaPage",__name:"ColecaoDetalhada",setup(v){const w=we(),m=de(),l=i(null),t=i({nome:"",descricao:""}),o=i([]),r=i(!1),s=i(!1),u=i(!1),x=i(!1),b=i(!1),$=i(null),k=i(""),g=i(!1),E=i(!1);ce(async()=>{try{const _=w.params.id;l.value=await U.getById(_),o.value=await U.getViasIn(_)}catch(_){console.error("Erro ao buscar detalhes da cole\xE7\xE3o:",_)}});const V=_=>{m.push(`/vias/${_}`)},p=()=>{r.value=!1},f=_=>{k.value=_,s.value=!0},O=()=>{g.value=!g.value},me=async({key:_,order:d})=>{try{o.value=await U.sortVias(o.value,{key:_,order:d})}catch(G){console.error("Erro ao ordenar vias:",G)}},pe=async()=>{try{const _=w.params.id;o.value=await U.getViasIn(_)}catch(_){console.error("Erro ao redefinir a ordena\xE7\xE3o:",_)}},_e=()=>{u.value=!0},fe=async()=>{if(l.value)try{await U.delete(l.value.id),m.push("/colecoes")}catch(_){console.error("Erro ao excluir a cole\xE7\xE3o:",_)}},ge=()=>{l.value&&ae({nome:t.value.nome,descricao:t.value.descricao})},ae=async _=>{if(l.value)try{await U.update(l.value.id,_),l.value.nome=_.nome,l.value.descricao=_.descricao,x.value=!1}catch(d){console.error("Erro ao editar a cole\xE7\xE3o:",d)}},xe=()=>{b.value=!0},Ve=_=>{b.value=_},Ce=async _=>{if(l.value)try{await U.addViaToColecao(l.value.id,_.id),o.value.push(_)}catch(d){console.error("Erro ao adicionar via \xE0 cole\xE7\xE3o:",d)}};return(_,d)=>(C(),y(ke,{class:"q-pa-none"},{default:a(()=>{var G,le,oe,te,se,ne;return[n("div",{class:"header-container",onClick:d[1]||(d[1]=c=>{var z,ue;return f(((ue=(z=l.value)==null?void 0:z.imagem)==null?void 0:ue.url)||"https://via.placeholder.com/300x150")})},[e(he,{class:"back-button"}),n("div",{class:"header",style:ye({backgroundImage:`url(${((le=(G=l.value)==null?void 0:G.imagem)==null?void 0:le.url)||"https://via.placeholder.com/300x150"})`})},[n("div",oa,[n("div",ta,[n("div",null,[n("div",sa,h((oe=l.value)==null?void 0:oe.nome),1),n("div",na,h((te=l.value)==null?void 0:te.descricao),1),n("div",ua,h(((se=o.value)==null?void 0:se.length)||"0")+" vias",1)]),n("div",da,[e(I,{name:"settings",size:"2rem",onClick:d[0]||(d[0]=Z(c=>E.value=!0,["stop"]))}),ia,e(I,{name:"sort",size:"2rem",onClick:Z(O,["stop"])})])])])],4)]),e(Xe,{modelValue:E.value,"onUpdate:modelValue":d[2]||(d[2]=c=>E.value=c),collectionData:l.value||{},onEdit:ae,onDelete:_e},null,8,["modelValue","collectionData"]),e(Ge,{modelValue:g.value,"onUpdate:modelValue":d[3]||(d[3]=c=>g.value=c),onSort:me,onReset:pe,onClose:O},null,8,["modelValue"]),n("div",ra,[(C(!0),J(re,null,ie(o.value,c=>(C(),y(A,{key:c.id,class:"via-card",clickable:"",onClick:z=>V(c.id)},{default:a(()=>{var z;return[e(K,{src:((z=c.imagem)==null?void 0:z.url)||"https://via.placeholder.com/150x150",class:"via-image",alt:"via image"},null,8,["src"]),e(S,{class:"q-pt-none"},{default:a(()=>[n("div",ca,[n("div",va,h(c.nome),1),n("div",ma," Grau: "+h(c.grau||"N/A"),1),n("div",pa," Extens\xE3o: "+h(c.extensao)+"m",1),n("div",_a," Dura\xE7\xE3o: "+h(c.duracao),1),n("div",fa," Montanha: "+h(c.montanha.nome),1),n("div",ga," Face: "+h(c.face.nome),1)])]),_:2},1024)]}),_:2},1032,["onClick"]))),128))]),e(Re,{isOpen:s.value,imageUrl:k.value,"onUpdate:isOpen":d[4]||(d[4]=c=>s.value=c)},null,8,["isOpen","imageUrl"]),e(q,{modelValue:r.value,"onUpdate:modelValue":d[6]||(d[6]=c=>r.value=c),onHide:p},{default:a(()=>[e(Ue,{isOpen:r.value,via:$.value,"onUpdate:isOpen":d[5]||(d[5]=c=>r.value=c)},null,8,["isOpen","via"])]),_:1},8,["modelValue"]),e(q,{modelValue:u.value,"onUpdate:modelValue":d[8]||(d[8]=c=>u.value=c),persistent:""},{default:a(()=>[e(A,null,{default:a(()=>[e(S,null,{default:a(()=>[Q(" Tem certeza que deseja excluir esta cole\xE7\xE3o? ")]),_:1}),e(H,{align:"right"},{default:a(()=>[e(D,{flat:"",label:"Sim",color:"red",onClick:fe}),e(D,{flat:"",label:"Voltar",onClick:d[7]||(d[7]=c=>u.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:x.value,"onUpdate:modelValue":d[12]||(d[12]=c=>x.value=c),persistent:""},{default:a(()=>[e(A,null,{default:a(()=>[e(S,null,{default:a(()=>[e(F,{modelValue:t.value.nome,"onUpdate:modelValue":d[9]||(d[9]=c=>t.value.nome=c),label:"Nome da Cole\xE7\xE3o"},null,8,["modelValue"]),e(F,{modelValue:t.value.descricao,"onUpdate:modelValue":d[10]||(d[10]=c=>t.value.descricao=c),label:"Descri\xE7\xE3o da Cole\xE7\xE3o"},null,8,["modelValue"])]),_:1}),e(H,{align:"right"},{default:a(()=>[e(D,{flat:"",label:"Editar",color:"primary",onClick:ge}),e(D,{flat:"",label:"Voltar",onClick:d[11]||(d[11]=c=>x.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(D,{fab:"",icon:"add",color:"blue",class:"fixed-bottom-right",onClick:xe}),e(aa,{isOpen:b.value,colecaoId:String((ne=l.value)==null?void 0:ne.id),"onUpdate:isOpen":Ve,onViaAdded:Ce},null,8,["isOpen","colecaoId"])]}),_:1}))}});var Da=P(xa,[["__scopeId","data-v-540b2d24"]]);export{Da as default};
