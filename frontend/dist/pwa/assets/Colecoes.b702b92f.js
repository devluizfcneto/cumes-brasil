import{a as y,Q as v}from"./QCardSection.90f19a00.js";import{v as U,r as p,x as V,y as Q,z as t,B as e,F as i,Q as b,_ as F,o as $,A as N,M as q,Z as D,aM as O,X as I,G as w,Y as L,H as z,I as G}from"./index.6959b9b0.js";import{C as c,Q as P}from"./ColecaoService.7596253d.js";import{Q as k,m as T,k as M,l as B}from"./QDialog.77034731.js";import{Q as H}from"./QList.df2777fc.js";import{Q as R}from"./QCardActions.bd1a20e4.js";import{a as A,Q as X}from"./QPage.a8faf3df.js";import{A as Y}from"./AuthenticateService.752378d9.js";import{Q as E}from"./QSelect.6598b104.js";import{Q as Z}from"./QForm.a4749b3d.js";import"./utils.d414aad9.js";import"./axios.4554e810.js";import"./scroll.cb686ef4.js";const j=i("div",{class:"text-h6"},"Busca Avan\xE7ada",-1),J={class:"row q-col-gutter-md"},K={class:"col"},W={class:"col"},ee=U({__name:"BuscaAvancada",emits:["apply-filters"],setup(x,{emit:_}){const d=_,a=p({nome:"",grau:"",montanha:"",bairro:"",extensaoMin:null,extensaoMax:null}),f=[{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"}],m=[{label:"Montanha 1",value:"montanha1"},{label:"Montanha 2",value:"montanha2"}],n=[{label:"Bairro 1",value:"bairro1"},{label:"Bairro 2",value:"bairro2"}],g=()=>{d("apply-filters",a.value)};return(h,s)=>(V(),Q(k,null,{default:t(()=>[e(A,{style:{"min-width":"300px","max-width":"1000px"}},{default:t(()=>[e(y,null,{default:t(()=>[j]),_:1}),e(y,null,{default:t(()=>[e(Z,{onSubmit:g},{default:t(()=>[e(v,{modelValue:a.value.nome,"onUpdate:modelValue":s[0]||(s[0]=r=>a.value.nome=r),label:"Nome",type:"text"},null,8,["modelValue"]),e(E,{modelValue:a.value.grau,"onUpdate:modelValue":s[1]||(s[1]=r=>a.value.grau=r),options:f,label:"Grau",clearable:""},null,8,["modelValue"]),e(E,{modelValue:a.value.montanha,"onUpdate:modelValue":s[2]||(s[2]=r=>a.value.montanha=r),options:m,label:"Montanha",clearable:""},null,8,["modelValue"]),e(E,{modelValue:a.value.bairro,"onUpdate:modelValue":s[3]||(s[3]=r=>a.value.bairro=r),options:n,label:"Bairro",clearable:""},null,8,["modelValue"]),i("div",J,[i("div",K,[e(v,{modelValue:a.value.extensaoMin,"onUpdate:modelValue":s[4]||(s[4]=r=>a.value.extensaoMin=r),label:"Extens\xE3o M\xEDnima",type:"number"},null,8,["modelValue"])]),i("div",W,[e(v,{modelValue:a.value.extensaoMax,"onUpdate:modelValue":s[5]||(s[5]=r=>a.value.extensaoMax=r),label:"Extens\xE3o M\xE1xima",type:"number"},null,8,["modelValue"])])]),e(b,{type:"submit",label:"Aplicar",color:"primary",class:"q-mt-md"})]),_:1})]),_:1})]),_:1})]),_:1}))}});const S=x=>(z("data-v-93976ce4"),x=x(),G(),x),ae=S(()=>i("div",{class:"text-h6 q-mb-md"},"Minhas Cole\xE7\xF5es",-1)),le={class:"row items-center q-my-md"},oe={class:"col-12 col-md"},te={class:"col-auto"},se=S(()=>i("div",{class:"text-h6"},"Adicionar Cole\xE7\xE3o",-1)),re=U({name:"ColecoesPage",__name:"Colecoes",setup(x){const _=N(),d=p([]),a=p(""),f=p(!1),m=p(!1),n=p({nome:"",descricao:"",usuario_id:Number(localStorage.getItem("userId"))||0,imagem_id:1}),g=async()=>{try{n.value.usuario_id=Number(localStorage.getItem("userId"))||0,await c.create(n.value),d.value=await c.getByUsuarioId(),m.value=!1,n.value={nome:"",descricao:"",usuario_id:Number(localStorage.getItem("userId"))||0,imagem_id:1}}catch(u){console.error("Erro ao adicionar cole\xE7\xE3o:",u)}};$(async()=>{if(!Y.isAuthenticated()){await _.push("/auth/login");return}try{d.value=await c.getByUsuarioId()}catch(u){console.error("Erro ao buscar cole\xE7\xF5es:",u)}});const h=async()=>{try{a.value.trim()?d.value=await c.searchByName(a.value.trim()):d.value=await c.getByUsuarioId()}catch(u){console.error("Erro ao buscar cole\xE7\xF5es:",u)}},s=async u=>{try{d.value=await c.search(u)}catch(l){console.error("Erro ao aplicar filtros:",l)}},r=u=>{_.push(`/colecoes/${u.id}`)};return(u,l)=>(V(),Q(X,{class:"page-padding"},{default:t(()=>[ae,i("div",le,[i("div",oe,[e(v,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=o=>a.value=o),label:"Buscar minhas cole\xE7\xF5es",onInput:h,debounce:"300"},null,8,["modelValue"])]),i("div",te,[e(b,{flat:"",icon:"filter_list",label:"Filtros",onClick:l[1]||(l[1]=o=>f.value=!0)})])]),e(ee,{onApplyFilters:s,modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=o=>f.value=o)},null,8,["modelValue"]),e(H,null,{default:t(()=>[(V(!0),q(L,null,D(d.value,o=>(V(),Q(T,{key:o.id,clickable:"",onClick:C=>r(o)},{default:t(()=>[e(M,{avatar:""},{default:t(()=>[e(O,{square:"",size:"150px",class:"custom-avatar",color:"primary","text-color":"white"},{default:t(()=>{var C;return[e(P,{src:(C=o.imagem)==null?void 0:C.url,cover:"",style:{width:"100%",height:"100%"}},null,8,["src"])]}),_:2},1024)]),_:2},1024),e(M,null,{default:t(()=>[e(B,{class:"text-h6 break-word"},{default:t(()=>[I(w(o.nome),1)]),_:2},1024),e(B,{caption:"",class:"text-body1"},{default:t(()=>[I(w(o.descricao),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),e(b,{fab:"",icon:"add",color:"blue",class:"fixed-bottom-right",onClick:l[3]||(l[3]=o=>m.value=!0)}),e(k,{modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=o=>m.value=o)},{default:t(()=>[e(A,{style:{"min-width":"300px"}},{default:t(()=>[e(y,null,{default:t(()=>[se]),_:1}),e(y,null,{default:t(()=>[e(v,{modelValue:n.value.nome,"onUpdate:modelValue":l[4]||(l[4]=o=>n.value.nome=o),label:"Nome da Cole\xE7\xE3o"},null,8,["modelValue"]),e(v,{modelValue:n.value.descricao,"onUpdate:modelValue":l[5]||(l[5]=o=>n.value.descricao=o),label:"Descri\xE7\xE3o da Cole\xE7\xE3o"},null,8,["modelValue"])]),_:1}),e(R,{align:"right"},{default:t(()=>[e(b,{flat:"",label:"Adicionar",color:"primary",onClick:g}),e(b,{flat:"",label:"Cancelar",onClick:l[6]||(l[6]=o=>m.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var ye=F(re,[["__scopeId","data-v-93976ce4"]]);export{ye as default};
